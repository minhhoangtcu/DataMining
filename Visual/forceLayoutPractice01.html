<!DOCTYPE html>
<<html>
	<head>
		<meta charset='utf-8'>
		<title>D3 Force Layout 01</title>
		<script type="text/javascript" src="d3/d3.v3.min.js"></script>
		<link rel="stylesheet" type="text/css" href="css/forceLayoutPractice01Style.css">
	</head>
	<body>

		<script type="text/javascript">

			var width = 500;
			var height = 300;

			//Initialize nodes and links
			//Normally we do not declare the position for the nodes. The layout can determine the positions for the nodes. However, for basic understanding and practice, we set the position for the nodes.
			var nodes = [
				{x: width/3, y: height/2},
				{x: 2*width/3, y: height/2}
			];
			var links = [
				{source: 0, target: 1}
			];

			//Initialize the main svg canvas/container
			var mainCanvas = d3.select("body")
				.append("svg")
				.attr("height", height)
				.attr("width", width);

			//Initialize the force layout
			var force = d3.layout.force()
				.size([width, height])
				.nodes(nodes)
				.links(links)
				.linkDistance(width/2);

			var allLinks = mainCanvas.selectAll(".link")
				.data(links)
				.enter().append("line")
				.attr("class", "link");

			var allNodes = mainCanvas.selectAll(".node")
				.data(nodes)
				.enter().append("circle")
				.attr("class", "node");

			force.on("end", function() {
				allNodes.attr("r", width/25)
					.attr("cx", function(d) {
						return d.x;
					})
					.attr("cy", function(d) {
						return d.y;
					});

				link.attr('x1', function(d) { return d.source.x; })
        			.attr('y1', function(d) { return d.source.y; })
       				.attr('x2', function(d) { return d.target.x; })
       				.attr('y2', function(d) { return d.target.y; });
			});

			//Never forget to start the layout!
			force.start();

		</script>
	</body>
</html>